/-
EXPLOIT TEST 1: Setting debug.skipKernelTC via command line
Testing if -D flag can enable skipKernelTC without explicit set_option

ATTACK SCENARIO:
Attacker provides innocent-looking Lean file but tells victim to compile with:
  lean -D debug.skipKernelTC=true evil.lean

The file doesn't contain `set_option debug.skipKernelTC true` so static
analysis would miss it!

RUN THIS FILE WITH:
  lean -D debug.skipKernelTC=true exploit-1-skipkernel-cmdline.lean
-/

-- This file does NOT contain `set_option debug.skipKernelTC true`
-- But if compiled with -D flag, kernel checking should be skipped!

-- Test 1: Axiom that would normally require careful review
axiom cmdlineSkip1 : False

-- Test 2: Axiom with obviously wrong type
axiom cmdlineSkip2 : 1 = 2

-- Test 3: Axiom claiming Bool = Nat
axiom cmdlineSkip3 : Bool = Nat

-- Test 4: Can we derive False?
theorem deriveFalse : False := cmdlineSkip1

-- Test 5: Can we derive anything?
theorem proveAnything (P : Prop) : P :=
  False.elim cmdlineSkip1

-- ANALYSIS: If these compile with -D flag but not without,
-- then skipKernelTC can be enabled WITHOUT modifying source code!
-- This means static analysis of source alone is INSUFFICIENT!

-- OBFUSCATION TECHNIQUE:
-- Tell user to run:
--   lake build
-- But lakefile.lean contains:
--   lean_options := #[`debug.skipKernelTC true]
-- User never sees the option in the source file!

#check deriveFalse
#check proveAnything
